/**
 * byte-buffer v1.0.3
 * Copyright (c) 2012-2015 Tim Kurvers <tim@moonsphere.net>
 *
 * Wrapper for JavaScript's ArrayBuffer/DataView.
 *
 * Licensed under the MIT license.
 */

!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ByteBuffer=e()}}(function(){return function e(t,i,r){function n(a,h){if(!i[a]){if(!t[a]){var s="function"==typeof require&&require;if(!h&&s)return s(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return n(i?i:e)},u,u.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?this.constructor.BIG_ENDIAN:arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];r(this,e),this._buffer=null,this._raw=null,this._view=null,this._order=!!i,this._implicitGrowth=!!n,this._index=0;var o=this._extractBuffer(t,!0);o||(o=new ArrayBuffer(t)),this.buffer=o}return n(e,null,[{key:"LITTLE_ENDIAN",value:!0,enumerable:!0},{key:"BIG_ENDIAN",value:!1,enumerable:!0}]),n(e,[{key:"_sanitizeIndex",value:function(){this._index<0&&(this._index=0),this._index>this.length&&(this._index=this.length)}},{key:"_extractBuffer",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(e&&"undefined"!=typeof e.byteLength)return"undefined"!=typeof e.buffer?t?e.buffer.slice(0):e.buffer:t?e.slice(0):e;if(!e||"undefined"==typeof e.length)return null;if(e.constructor===String)return null;try{return new Uint8Array(e).buffer}catch(i){return null}}},{key:"front",value:function(){return this._index=0,this}},{key:"end",value:function(){return this._index=this.length,this}},{key:"seek",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return this.index+=e,this}},{key:"read",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.available:arguments[0];if(t>this.available)throw new Error("Cannot read "+t+" byte(s), "+this.available+" available");if(t<=0)throw new RangeError("Invalid number of bytes "+t);var i=new e(this._buffer.slice(this._index,this._index+t),this.order);return this._index+=t,i}},{key:"write",value:function(e){var t=void 0;if(e instanceof Uint8Array)t=e;else{var i=this._extractBuffer(e);if(!i)throw new TypeError("Cannot write "+e+", not a sequence");t=new Uint8Array(i)}var r=this.available;if(t.byteLength>r){if(!this._implicitGrowth)throw new Error("Cannot write "+e+" using "+t.byteLength+" byte(s), "+this.available+" available");this.append(t.byteLength-r)}return this._raw.set(t,this._index),this._index+=t.byteLength,this}},{key:"readString",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.available:arguments[0];if(e>this.available)throw new Error("Cannot read "+e+" byte(s), "+this.available+" available");if(e<=0)throw new RangeError("Invalid number of bytes "+e);for(var t=this._raw,i=[],r=0,n=null,o=null,a=null,h=null,s=this._index+e;this._index<s;)if(n=t[this._index],n<128)i[r++]=n,this._index++;else{if(n<194)throw new Error("Unexpected continuation byte");if(n<224){if(o=t[this._index+1],o<128||o>191)throw new Error("Bad continuation byte");i[r++]=((31&n)<<6)+(63&o),this._index+=2}else if(n<240){if(o=t[this._index+1],o<128||o>191)throw new Error("Bad continuation byte");if(a=t[this._index+2],a<128||a>191)throw new Error("Bad continuation byte");i[r++]=((15&n)<<12)+((63&o)<<6)+(63&a),this._index+=3}else{if(!(n<245))throw new Error("Illegal byte");if(o=t[this._index+1],o<128||o>191)throw new Error("Bad continuation byte");if(a=t[this._index+2],a<128||a>191)throw new Error("Bad continuation byte");if(h=t[this._index+3],h<128||h>191)throw new Error("Bad continuation byte");var u=((7&n)<<18)+((63&o)<<12)+((63&a)<<6)+(63&h);u-=65536,i[r++]=55296+((1047552&u)>>>10),i[r++]=56320+(1023&u),this._index+=4}}var l=65536,f=i.length;if(f<l)return String.fromCharCode.apply(String,i);for(var d=[],y=0;y<f;)d.push(String.fromCharCode.apply(String,i.slice(y,y+l))),y+=l;return d.join("")}},{key:"writeString",value:function(e){for(var t=[],i=e.length,r=0,n=0;r<i;){var o=e.charCodeAt(r);if(o<=127)t[n++]=o;else if(o<=2047)t[n++]=192|(1984&o)>>>6,t[n++]=128|63&o;else if(o<=55295||o>=57344&&o<=65535)t[n++]=224|(61440&o)>>>12,t[n++]=128|(4032&o)>>>6,t[n++]=128|63&o;else{if(r===i-1)throw new Error("Unpaired surrogate "+e[r]+" (index "+r+")");var a=e.charCodeAt(++r);if(o<55296||o>56319||a<56320||a>57343)throw new Error("Unpaired surrogate "+e[r]+" (index "+r+")");var h=((1023&o)<<10)+(1023&a)+65536;t[n++]=240|(1835008&h)>>>18,t[n++]=128|(258048&h)>>>12,t[n++]=128|(4032&h)>>>6,t[n++]=128|63&h}++r}return this.write(t),t.length}},{key:"readCString",value:function(){for(var e=this._raw,t=e.length,i=this._index;0!==e[i]&&i<t;)++i;if(t=i-this._index,t>0){var r=this.readString(t);return this.readByte(),r}return null}},{key:"writeCString",value:function(e){var t=this.writeString(e);return this.writeByte(0),++t}},{key:"prepend",value:function(e){if(e<=0)throw new RangeError("Invalid number of bytes "+e);var t=new Uint8Array(this.length+e);return t.set(this._raw,e),this._index+=e,this.buffer=t.buffer,this}},{key:"append",value:function(e){if(e<=0)throw new RangeError("Invalid number of bytes "+e);var t=new Uint8Array(this.length+e);return t.set(this._raw,0),this.buffer=t.buffer,this}},{key:"clip",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this._index:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.length:arguments[1];e<0&&(e=this.length+e);var i=this._buffer.slice(e,t);return this._index-=e,this.buffer=i,this}},{key:"slice",value:function t(){var i=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?this.length:arguments[1],t=new e(this._buffer.slice(i,r),this.order);return t}},{key:"clone",value:function i(){var i=new e(this._buffer.slice(0),this.order,this.implicitGrowth);return i.index=this._index,i}},{key:"reverse",value:function(){return Array.prototype.reverse.call(this._raw),this._index=0,this}},{key:"toArray",value:function(){return Array.prototype.slice.call(this._raw,0)}},{key:"toString",value:function(){var e=this._order===this.constructor.BIG_ENDIAN?"big-endian":"little-endian";return"[ByteBuffer; Order: "+e+"; Length: "+this.length+"; Index: "+this._index+"; Available: "+this.available+"]"}},{key:"toHex",value:function(){var e=arguments.length<=0||void 0===arguments[0]?" ":arguments[0];return Array.prototype.map.call(this._raw,function(e){return("00"+e.toString(16).toUpperCase()).slice(-2)}).join(e)}},{key:"toASCII",value:function(){var e=arguments.length<=0||void 0===arguments[0]?" ":arguments[0],t=arguments.length<=1||void 0===arguments[1]||arguments[1],i=arguments.length<=2||void 0===arguments[2]?"ï¿½":arguments[2],r=t?" ":"";return Array.prototype.map.call(this._raw,function(e){return e<32||e>126?r+i:r+String.fromCharCode(e)}).join(e)}},{key:"buffer",get:function(){return this._buffer},set:function(e){this._buffer=e,this._raw=new Uint8Array(this._buffer),this._view=new DataView(this._buffer),this._sanitizeIndex()}},{key:"raw",get:function(){return this._raw}},{key:"view",get:function(){return this._view}},{key:"length",get:function(){return this._buffer.byteLength}},{key:"byteLength",get:function(){return this.length}},{key:"order",get:function(){return this._order},set:function(e){this._order=!!e}},{key:"implicitGrowth",get:function(){return this._implicitGrowth},set:function(e){this._implicitGrowth=!!e}},{key:"index",get:function(){return this._index},set:function(e){if(e<0||e>this.length)throw new RangeError("Invalid index "+e+", should be between 0 and "+this.length);this._index=e}},{key:"available",get:function(){return this.length-this._index}}]),e}(),a=function(e,t){return function(){var i=arguments.length<=0||void 0===arguments[0]?this._order:arguments[0];if(t>this.available)throw new Error("Cannot read "+t+" byte(s), "+this.available+" available");var r=this._view[e](this._index,i);return this._index+=t,r}},h=function(e,t){return function(i){var r=arguments.length<=1||void 0===arguments[1]?this._order:arguments[1],n=this.available;if(t>n){if(!this._implicitGrowth)throw new Error("Cannot write "+i+" using "+t+" byte(s), "+n+" available");this.append(t-n)}return this._view[e](this._index,i,r),this._index+=t,this}};o.prototype.readByte=a("getInt8",1),o.prototype.readUnsignedByte=a("getUint8",1),o.prototype.readShort=a("getInt16",2),o.prototype.readUnsignedShort=a("getUint16",2),o.prototype.readInt=a("getInt32",4),o.prototype.readUnsignedInt=a("getUint32",4),o.prototype.readFloat=a("getFloat32",4),o.prototype.readDouble=a("getFloat64",8),o.prototype.readBigInt64=a("getBigInt64",8),o.prototype.readBigUint64=a("getBigUint64",8),o.prototype.writeByte=h("setInt8",1),o.prototype.writeUnsignedByte=h("setUint8",1),o.prototype.writeShort=h("setInt16",2),o.prototype.writeUnsignedShort=h("setUint16",2),o.prototype.writeInt=h("setInt32",4),o.prototype.writeUnsignedInt=h("setUint32",4),o.prototype.writeFloat=h("setFloat32",4),o.prototype.writeDouble=h("setFloat64",8),o.prototype.writeBigInt64=h("setBigInt64",8),o.prototype.writeBigUint64=h("setBigUint64",8),i["default"]=o,t.exports=i["default"]},{}]},{},[1])(1)});